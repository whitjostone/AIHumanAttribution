<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Human + AI Attribution Scale</title>
  <style>
    :root{
      --track:#e5e7eb; /* gray-200 */
      --thumb:#111827; /* gray-900 */
      --accent:#2563eb; /* blue-600 */
    }
    *{box-sizing:border-box}
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      margin:0; padding:24px; color:#111827; background:#fafafa;
    }
    .wrap{max-width:900px;margin:0 auto;}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
    h1{font-size:clamp(22px,3.4vw,32px);margin:0}
    .anchors{display:flex;justify-content:space-between;gap:12px;margin:18px 0 4px 0;font-weight:600}
    .center-label{display:flex;justify-content:center;margin:0 0 8px 0;font-weight:700;color:#374151}
    .slider-area{position:relative;margin:8px 0 18px 0;height:56px}
    .track{position:absolute;left:0;right:0;top:50%;height:8px;transform:translateY(-50%);background:var(--track);border-radius:999px}
    .fill{position:absolute;left:0;top:50%;height:8px;transform:translateY(-50%);background:linear-gradient(90deg,var(--accent),#60a5fa);border-radius:999px;width:50%}
    .thumb{position:absolute;top:50%;transform:translate(-50%,-50%);width:24px;height:24px;border-radius:999px;background:var(--thumb);box-shadow:0 2px 10px rgba(0,0,0,.18)}
    .score{display:flex;align-items:center;gap:10px;font-variant-numeric:tabular-nums}
    .score strong{font-size:20px}
    .card{background:white;border:1px solid #e5e7eb;border-radius:16px;padding:16px;box-shadow:0 2px 10px rgba(0,0,0,.04)}
    .qgrid{display:grid;grid-template-columns:1fr;gap:14px}
    .topic{font-size:18px;font-weight:700;margin-bottom:4px}
    .radio-row{display:flex;gap:10px;align-items:stretch}
    .radio-row label{flex:1;text-align:left;padding:10px 12px;border:1px solid #e5e7eb;border-radius:12px;background:#f9fafb;cursor:pointer;user-select:none;line-height:1.25}
    .radio-row input{display:none}
    .radio-row input:checked + label{border-color:#bfdbfe;background:#eff6ff}
    .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    button{border:1px solid #d1d5db;background:white;border-radius:12px;padding:10px 14px;cursor:pointer}
    button.primary{background:var(--accent);border-color:var(--accent);color:white}
    .tiny{font-size:12px;color:#6b7280}

    @media print{
      body{background:white;padding:0}
      .controls{display:none}
      .card{box-shadow:none}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Human + AI Attribution Scale</h1>
      <div class="score" aria-live="polite">
        Score: <strong id="scoreOut">50</strong><span class="tiny">/100</span>
      </div>
    </header>

    <div class="anchors">
      <div id="leftLabel">Human Generated</div>
      <div id="rightLabel">AI Generated</div>
    </div>
    <div class="center-label" id="centerLabel">Collaboration</div>

    <div class="slider-area card" role="img" aria-label="Position between Human Generated and AI Generated">
      <div class="track" aria-hidden="true"></div>
      <div class="fill" id="fill" aria-hidden="true" style="width:50%"></div>
      <div class="thumb" id="thumb" style="left:50%"></div>
    </div>
    <div id="debug" class="tiny" style="display:none;margin-top:6px"></div>

  </div>

    <section class="card" aria-labelledby="inputsTitle">
      <h2 id="inputsTitle" style="margin-top:0;font-size:18px">Selections</h2>
      <div class="qgrid" id="questionGrid">
        <!-- Q1 -->
        <div class="topic">1. AI assisted with literature review</div>
        <div class="radio-row">
          <input type="radio" id="q1a" name="q1" value="100" />
          <label for="q1a">Yes, without revision</label>

          <input type="radio" id="q1b" name="q1" value="50" />
          <label for="q1b">Yes, with revision and validation</label>

          <input type="radio" id="q1c" name="q1" value="0" />
          <label for="q1c">No</label>
        </div>

        <!-- Q2 -->
        <div class="topic">2. Was AI used to develop language presented in the submission?</div>
        <div class="radio-row">
          <input type="radio" id="q2a" name="q2" value="100" />
          <label for="q2a">Yes, without revision</label>

          <input type="radio" id="q2b" name="q2" value="50" />
          <label for="q2b">Yes, with revision and validation</label>

          <input type="radio" id="q2c" name="q2" value="0" />
          <label for="q2c">No</label>
        </div>

        <!-- Q3 -->
        <div class="topic">3. Was AI used in data evaluation?</div>
        <div class="radio-row">
          <input type="radio" id="q3a" name="q3" value="100" />
          <label for="q3a">Yes, without revision</label>

          <input type="radio" id="q3b" name="q3" value="50" />
          <label for="q3b">Yes, with revision and validation</label>

          <input type="radio" id="q3c" name="q3" value="0" />
          <label for="q3c">No</label>
        </div>

        <!-- Q4 -->
        <div class="topic">4. Was AI used for idea generation (outlines, prompts, brainstorming)?</div>
        <div class="radio-row">
          <input type="radio" id="q4a" name="q4" value="100" />
          <label for="q4a">Yes, without revision</label>

          <input type="radio" id="q4b" name="q4" value="50" />
          <label for="q4b">Yes, with revision and validation</label>

          <input type="radio" id="q4c" name="q4" value="0" />
          <label for="q4c">No</label>
        </div>

        <!-- Q5 -->
        <div class="topic">5. Was AI used for code/statistical drafting or analysis scripting?</div>
        <div class="radio-row">
          <input type="radio" id="q5a" name="q5" value="100" />
          <label for="q5a">Yes, without revision</label>

          <input type="radio" id="q5b" name="q5" value="50" />
          <label for="q5b">Yes, with revision and validation</label>

          <input type="radio" id="q5c" name="q5" value="0" />
          <label for="q5c">No</label>
        </div>

        <!-- Q6 -->
        <div class="topic">6. Was AI used for citation management (discovering, formatting, or summarizing references)?</div>
        <div class="radio-row">
          <input type="radio" id="q6a" name="q6" value="100" />
          <label for="q6a">Yes, without revision</label>

          <input type="radio" id="q6b" name="q6" value="50" />
          <label for="q6b">Yes, with revision and validation</label>

          <input type="radio" id="q6c" name="q6" value="0" />
          <label for="q6c">No</label>
        </div>
      </div>
    </section>

    <div class="controls" style="margin-top:14px">" style="margin-top:14px">
      <button class="primary" id="shareBtn" title="Copy a shareable URL with your current state">Copy shareable link</button>
      <button id="resetBtn" title="Reset all inputs">Reset</button>
      <span class="tiny">Tip: Add this pageâ€™s link or QR code to your PDF for universal interactivity.</span>
    </div>
  </div>

  <script>
    function initAttribution(){
      const scoreOut = document.getElementById('scoreOut');
      const thumb = document.getElementById('thumb');
      const fill = document.getElementById('fill');
      const debug = document.getElementById('debug');

      const groups = [
        {name:'q1', weight: 1},
        {name:'q2', weight: 1},
        {name:'q3', weight: 2},
        {name:'q4', weight: 1},
        {name:'q5', weight: 2},
        {name:'q6', weight: 1}
      ];

      function getVal(name){
        const sel = document.querySelector(`input[name="${name}"]:checked`);
        return sel ? Number(sel.value) : null;
      }

      function computeAverage(){
        let sum=0, wsum=0; const snapshot={};
        for(const g of groups){
          const v = getVal(g.name);
          snapshot[g.name]=v; // for debug
          if(v==null) continue;
          sum += v * (g.weight||1);
          wsum += (g.weight||1);
        }
        const avg = (wsum===0) ? 50 : (sum/wsum);
        return {avg, snapshot};
      }

      function update(pushHash=false){
        const {avg, snapshot} = computeAverage();
        const s = Math.max(0,Math.min(100,avg));
        scoreOut.textContent = Math.round(s);
        thumb.style.left = s+"%";
        fill.style.width = s+"%";
        
        // Optional debug panel when ?debug=1
        if(new URLSearchParams(location.search).get('debug')==='1'){
          debug.style.display='block';
          debug.textContent = `values: ${JSON.stringify(snapshot)} | avg=${s.toFixed(1)}`;
          if(window.console) console.log('Attribution update', {snapshot, s});
        }

        if(pushHash){
          const params = new URLSearchParams();
          for(const g of groups){
            const v = getVal(g.name);
            if(v!=null) params.set(g.name, String(v));
          }
          history.replaceState(null,'','#'+params.toString());
        }
      }

      // Event delegation on the container to catch any radio changes
      const qgrid = document.getElementById('questionGrid');
      if(qgrid){
        qgrid.addEventListener('change', (e)=>{
          if(e.target && e.target.matches('input[type="radio"][name^="q"]')){
            update(true);
          }
        });
      }

      // Restore from hash
      (function restoreFromHash(){
        const params = new URLSearchParams(location.hash.replace(/^#/,''));
        groups.forEach(g=>{
          const v = params.get(g.name);
          if(v!=null){
            const el = document.querySelector(`input[name="${g.name}"][value="${v}"]`);
            if(el) el.checked = true;
          }
        });
      })();

      // Buttons
      const shareBtn = document.getElementById('shareBtn');
      if(shareBtn){
        shareBtn.addEventListener('click', async (event)=>{
          try{
            await navigator.clipboard.writeText(location.href);
            const t = event.target; const old = t.textContent; t.textContent = 'Link copied!';
            setTimeout(()=> t.textContent = old, 1500);
          }catch(e){
            alert('Could not copy. Manually copy this URL:\n'+location.href);
          }
        });
      }

      const resetBtn = document.getElementById('resetBtn');
      if(resetBtn){
        resetBtn.addEventListener('click', ()=>{
          document.querySelectorAll('input[type="radio"]').forEach(i=> i.checked=false);
          update(true);
        });
      }

      update(false);
      window.__updateAttribution = update; // expose for testing if needed
    }

    // Run immediately if DOM is already ready; otherwise wait
    if(document.readyState === 'loading'){
      document.addEventListener('DOMContentLoaded', initAttribution);
    } else {
      initAttribution();
    }
  </script>
</body>
</html>
